{"ast":null,"code":"export const calcPopoverPosition = _ref => {\n  let {\n    popoverEl,\n    targetEl,\n    angleEl,\n    needsAngle,\n    targetX,\n    targetY,\n    targetWidth = 0,\n    targetHeight = 0,\n    theme\n  } = _ref;\n  if (targetEl.current) {\n    targetEl = targetEl.current;\n  } else if (targetEl.value) {\n    targetEl = targetEl.value;\n  } else if (targetEl.el) {\n    targetEl = targetEl.el;\n  } else if (targetEl.$el) {\n    targetEl = targetEl.$el;\n  }\n  if (typeof targetEl === 'string') {\n    // eslint-disable-next-line\n    targetEl = document.querySelector(targetEl);\n  }\n\n  /* eslint-disable */\n  let appWidth = document.body.offsetWidth;\n  let appHeight = document.body.offsetHeight;\n  if (appWidth === 0) {\n    appWidth = window.innerWidth;\n  }\n  if (appHeight === 0) {\n    appHeight = window.innerHeight;\n  }\n  /* eslint-enable */\n  const [popoverWidth, popoverHeight] = [popoverEl.offsetWidth, popoverEl.offsetHeight];\n  let angleSize = 0;\n  let angleLeft;\n  let angleTop;\n  let anglePosition = '';\n  if (needsAngle) {\n    angleSize = angleEl.offsetWidth / 2;\n  }\n  let targetOffsetLeft;\n  let targetOffsetTop;\n  // eslint-disable-next-line\n  const targetElStyles = window.getComputedStyle(targetEl);\n  let safeAreaTop = parseInt(targetElStyles.getPropertyValue('--k-safe-area-top'), 10) || 0;\n  let safeAreaLeft = parseInt(targetElStyles.getPropertyValue('--k-safe-area-left'), 10) || 0;\n  let safeAreaRight = parseInt(targetElStyles.getPropertyValue('--k-safe-area-right'), 10) || 0;\n  if (Number.isNaN(safeAreaTop)) safeAreaTop = 0;\n  if (Number.isNaN(safeAreaLeft)) safeAreaLeft = 0;\n  if (Number.isNaN(safeAreaRight)) safeAreaRight = 0;\n  if (targetEl) {\n    targetWidth = targetEl.offsetWidth;\n    targetHeight = targetEl.offsetHeight;\n    const targetElBox = targetEl.getBoundingClientRect();\n    targetOffsetLeft = targetElBox.left;\n    targetOffsetTop = targetElBox.top;\n  } else if (typeof targetX !== 'undefined' && targetY !== 'undefined') {\n    targetOffsetLeft = targetX;\n    targetOffsetTop = targetY;\n  }\n  let [left, top, diff] = [0, 0, 0];\n  const angleMin = theme === 'ios' ? 13 : 23;\n\n  // Top Position\n  let position = 'top';\n  if (popoverHeight + angleSize < targetOffsetTop - safeAreaTop) {\n    // On top\n    top = targetOffsetTop - popoverHeight - angleSize;\n  } else if (popoverHeight + angleSize < appHeight - targetOffsetTop - targetHeight) {\n    // On bottom\n    position = 'bottom';\n    top = targetOffsetTop + targetHeight + angleSize;\n  } else {\n    // On middle\n    position = 'middle';\n    top = targetHeight / 2 + targetOffsetTop - popoverHeight / 2;\n    diff = top;\n    top = Math.max(5, Math.min(top, appHeight - popoverHeight - 5));\n    diff -= top;\n  }\n\n  // Horizontal Position\n  if (position === 'top' || position === 'bottom') {\n    left = targetWidth / 2 + targetOffsetLeft - popoverWidth / 2;\n    diff = left;\n    left = Math.max(5, Math.min(left, appWidth - popoverWidth - 5));\n    if (safeAreaLeft) {\n      left = Math.max(left, safeAreaLeft);\n    }\n    if (safeAreaRight && left + popoverWidth > appWidth - 5 - safeAreaRight) {\n      left = appWidth - 5 - safeAreaRight - popoverWidth;\n    }\n    if (position === 'top') {\n      anglePosition = 'bottom';\n    }\n    if (position === 'bottom') {\n      anglePosition = 'top';\n    }\n    diff -= left;\n    angleLeft = popoverWidth / 2 - angleSize + diff;\n    angleLeft = Math.max(Math.min(angleLeft, popoverWidth - angleSize * 2 - angleMin), angleMin);\n  } else if (position === 'middle') {\n    left = targetOffsetLeft - popoverWidth - angleSize;\n    anglePosition = 'right';\n    if (left < 5 || left + popoverWidth + safeAreaRight > appWidth || left < safeAreaLeft) {\n      if (left < 5) left = targetOffsetLeft + targetWidth + angleSize;\n      if (left + popoverWidth + safeAreaRight > appWidth) left = appWidth - popoverWidth - 5 - safeAreaRight;\n      if (left < safeAreaLeft) left = safeAreaLeft;\n      anglePosition = 'left';\n    }\n    angleTop = popoverHeight / 2 - angleSize + diff;\n    angleTop = Math.max(Math.min(angleTop, popoverHeight - angleSize * 2 - angleMin), angleMin);\n  }\n  const popoverVerticalPosition = position;\n  const popoverHorizontalPosition = left < targetOffsetLeft ? 'left' : 'right';\n  return {\n    set: true,\n    angleTop: typeof angleTop === 'undefined' ? undefined : `${angleTop}px`,\n    angleLeft: typeof angleLeft === 'undefined' ? undefined : `${angleLeft}px`,\n    anglePosition,\n    popoverTop: `${top}px`,\n    popoverLeft: `${left}px`,\n    popoverPosition: `${popoverVerticalPosition}-${popoverHorizontalPosition}`\n  };\n};","map":{"version":3,"names":["calcPopoverPosition","_ref","popoverEl","targetEl","angleEl","needsAngle","targetX","targetY","targetWidth","targetHeight","theme","current","value","el","$el","document","querySelector","appWidth","body","offsetWidth","appHeight","offsetHeight","window","innerWidth","innerHeight","popoverWidth","popoverHeight","angleSize","angleLeft","angleTop","anglePosition","targetOffsetLeft","targetOffsetTop","targetElStyles","getComputedStyle","safeAreaTop","parseInt","getPropertyValue","safeAreaLeft","safeAreaRight","Number","isNaN","targetElBox","getBoundingClientRect","left","top","diff","angleMin","position","Math","max","min","popoverVerticalPosition","popoverHorizontalPosition","set","undefined","popoverTop","popoverLeft","popoverPosition"],"sources":["/Users/myroshnychenkovladislav/Desktop/speedbookJS/speedbookReact/speedbook/node_modules/konsta/shared/esm/calc-popover-position.js"],"sourcesContent":["export const calcPopoverPosition = _ref => {\n  let {\n    popoverEl,\n    targetEl,\n    angleEl,\n    needsAngle,\n    targetX,\n    targetY,\n    targetWidth = 0,\n    targetHeight = 0,\n    theme\n  } = _ref;\n  if (targetEl.current) {\n    targetEl = targetEl.current;\n  } else if (targetEl.value) {\n    targetEl = targetEl.value;\n  } else if (targetEl.el) {\n    targetEl = targetEl.el;\n  } else if (targetEl.$el) {\n    targetEl = targetEl.$el;\n  }\n  if (typeof targetEl === 'string') {\n    // eslint-disable-next-line\n    targetEl = document.querySelector(targetEl);\n  }\n\n  /* eslint-disable */\n  let appWidth = document.body.offsetWidth;\n  let appHeight = document.body.offsetHeight;\n  if (appWidth === 0) {\n    appWidth = window.innerWidth;\n  }\n  if (appHeight === 0) {\n    appHeight = window.innerHeight;\n  }\n  /* eslint-enable */\n  const [popoverWidth, popoverHeight] = [popoverEl.offsetWidth, popoverEl.offsetHeight];\n  let angleSize = 0;\n  let angleLeft;\n  let angleTop;\n  let anglePosition = '';\n  if (needsAngle) {\n    angleSize = angleEl.offsetWidth / 2;\n  }\n  let targetOffsetLeft;\n  let targetOffsetTop;\n  // eslint-disable-next-line\n  const targetElStyles = window.getComputedStyle(targetEl);\n  let safeAreaTop = parseInt(targetElStyles.getPropertyValue('--k-safe-area-top'), 10) || 0;\n  let safeAreaLeft = parseInt(targetElStyles.getPropertyValue('--k-safe-area-left'), 10) || 0;\n  let safeAreaRight = parseInt(targetElStyles.getPropertyValue('--k-safe-area-right'), 10) || 0;\n  if (Number.isNaN(safeAreaTop)) safeAreaTop = 0;\n  if (Number.isNaN(safeAreaLeft)) safeAreaLeft = 0;\n  if (Number.isNaN(safeAreaRight)) safeAreaRight = 0;\n  if (targetEl) {\n    targetWidth = targetEl.offsetWidth;\n    targetHeight = targetEl.offsetHeight;\n    const targetElBox = targetEl.getBoundingClientRect();\n    targetOffsetLeft = targetElBox.left;\n    targetOffsetTop = targetElBox.top;\n  } else if (typeof targetX !== 'undefined' && targetY !== 'undefined') {\n    targetOffsetLeft = targetX;\n    targetOffsetTop = targetY;\n  }\n  let [left, top, diff] = [0, 0, 0];\n  const angleMin = theme === 'ios' ? 13 : 23;\n\n  // Top Position\n  let position = 'top';\n  if (popoverHeight + angleSize < targetOffsetTop - safeAreaTop) {\n    // On top\n    top = targetOffsetTop - popoverHeight - angleSize;\n  } else if (popoverHeight + angleSize < appHeight - targetOffsetTop - targetHeight) {\n    // On bottom\n    position = 'bottom';\n    top = targetOffsetTop + targetHeight + angleSize;\n  } else {\n    // On middle\n    position = 'middle';\n    top = targetHeight / 2 + targetOffsetTop - popoverHeight / 2;\n    diff = top;\n    top = Math.max(5, Math.min(top, appHeight - popoverHeight - 5));\n    diff -= top;\n  }\n\n  // Horizontal Position\n  if (position === 'top' || position === 'bottom') {\n    left = targetWidth / 2 + targetOffsetLeft - popoverWidth / 2;\n    diff = left;\n    left = Math.max(5, Math.min(left, appWidth - popoverWidth - 5));\n    if (safeAreaLeft) {\n      left = Math.max(left, safeAreaLeft);\n    }\n    if (safeAreaRight && left + popoverWidth > appWidth - 5 - safeAreaRight) {\n      left = appWidth - 5 - safeAreaRight - popoverWidth;\n    }\n    if (position === 'top') {\n      anglePosition = 'bottom';\n    }\n    if (position === 'bottom') {\n      anglePosition = 'top';\n    }\n    diff -= left;\n    angleLeft = popoverWidth / 2 - angleSize + diff;\n    angleLeft = Math.max(Math.min(angleLeft, popoverWidth - angleSize * 2 - angleMin), angleMin);\n  } else if (position === 'middle') {\n    left = targetOffsetLeft - popoverWidth - angleSize;\n    anglePosition = 'right';\n    if (left < 5 || left + popoverWidth + safeAreaRight > appWidth || left < safeAreaLeft) {\n      if (left < 5) left = targetOffsetLeft + targetWidth + angleSize;\n      if (left + popoverWidth + safeAreaRight > appWidth) left = appWidth - popoverWidth - 5 - safeAreaRight;\n      if (left < safeAreaLeft) left = safeAreaLeft;\n      anglePosition = 'left';\n    }\n    angleTop = popoverHeight / 2 - angleSize + diff;\n    angleTop = Math.max(Math.min(angleTop, popoverHeight - angleSize * 2 - angleMin), angleMin);\n  }\n  const popoverVerticalPosition = position;\n  const popoverHorizontalPosition = left < targetOffsetLeft ? 'left' : 'right';\n  return {\n    set: true,\n    angleTop: typeof angleTop === 'undefined' ? undefined : `${angleTop}px`,\n    angleLeft: typeof angleLeft === 'undefined' ? undefined : `${angleLeft}px`,\n    anglePosition,\n    popoverTop: `${top}px`,\n    popoverLeft: `${left}px`,\n    popoverPosition: `${popoverVerticalPosition}-${popoverHorizontalPosition}`\n  };\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}